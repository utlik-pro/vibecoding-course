<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibecoding —Å –Ω—É–ª—è - –£—Ä–æ–∫–∏ –∫—É—Ä—Å–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 60px 20px 40px;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .course-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .course-subtitle {
            font-size: 1.2rem;
            color: #a0aec0;
            margin-bottom: 30px;
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 5px;
            margin: 30px auto;
            max-width: 600px;
        }

        .progress-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 12px;
            border-radius: 50px;
            width: 8.33%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-text {
            text-align: center;
            margin-top: 15px;
            color: #a0aec0;
            font-size: 0.95rem;
        }

        .progress-text span {
            color: #667eea;
            font-weight: 700;
        }

        /* Lessons Grid */
        .lessons-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 40px 0;
        }

        /* Lesson Card */
        .lesson-card {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            text-decoration: none;
            display: block;
        }

        .lesson-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lesson-card.unlocked:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: #667eea;
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .lesson-card.unlocked:hover::before {
            opacity: 1;
        }

        .lesson-card.unlocked {
            cursor: pointer;
        }

        .lesson-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .lesson-card.locked:hover {
            transform: none;
        }

        .lesson-card.completed {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .lesson-card.completed::before {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            opacity: 1;
        }

        /* Lesson Header */
        .lesson-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .lesson-number {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .lesson-card.completed .lesson-number {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .lesson-card.locked .lesson-number {
            background: rgba(255,255,255,0.2);
            color: #6b7280;
        }

        .lesson-status {
            font-size: 1.8rem;
        }

        /* Lock Icon */
        .lock-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .lock-icon svg {
            width: 20px;
            height: 20px;
            fill: #6b7280;
        }

        /* Unlock Icon */
        .unlock-icon svg {
            fill: #10b981;
        }

        /* Lesson Content */
        .lesson-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: #fff;
        }

        .lesson-card.locked .lesson-title {
            color: #6b7280;
        }

        .lesson-description {
            font-size: 0.95rem;
            color: #a0aec0;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .lesson-card.locked .lesson-description {
            color: #4b5563;
        }

        /* Lesson Topics */
        .lesson-topics {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .topic-tag {
            background: rgba(102, 126, 234, 0.2);
            color: #a5b4fc;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .lesson-card.locked .topic-tag {
            background: rgba(255,255,255,0.05);
            color: #4b5563;
        }

        .lesson-card.completed .topic-tag {
            background: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
        }

        /* Lesson Duration */
        .lesson-duration {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #6b7280;
            font-size: 0.85rem;
        }

        .lesson-duration svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        /* CTA Button */
        .start-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .lesson-card.unlocked:hover .start-btn {
            transform: translateX(5px);
        }

        .lesson-card.completed .start-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        /* Overlay for locked */
        .locked-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 35, 0.7);
            backdrop-filter: blur(2px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lesson-card.locked:hover .locked-overlay {
            opacity: 1;
        }

        .locked-overlay svg {
            width: 50px;
            height: 50px;
            fill: #667eea;
            margin-bottom: 15px;
        }

        .locked-overlay p {
            color: #a0aec0;
            font-size: 0.95rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .course-title {
                font-size: 1.8rem;
            }

            .lessons-container {
                grid-template-columns: 1fr;
            }

            .lesson-card {
                padding: 25px;
            }
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .lesson-card.current {
            animation: pulse 2s infinite;
            border-color: #667eea;
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.4);
        }

        /* Sparkle effect for unlocked */
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üöÄ</div>
            <h1 class="course-title">Vibecoding —Å –Ω—É–ª—è</h1>
            <p class="course-subtitle">–°–æ–∑–¥–∞–Ω–∏–µ SaaS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é –ò–ò</p>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <p class="progress-text">–ü—Ä–æ–π–¥–µ–Ω–æ <span id="completedCount">1</span> –∏–∑ <span>12</span> —É—Ä–æ–∫–æ–≤</p>
        </header>

        <div class="lessons-container" id="lessonsGrid">
            <!-- Lessons will be inserted here by JavaScript -->
        </div>

        <footer>
            <p>¬© 2025 Vibecoding —Å –Ω—É–ª—è ‚Ä¢ <a href="old-index.html">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞</a></p>
        </footer>
    </div>

    <!-- Email Login Modal -->
    <div id="emailModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 2.5rem; max-width: 400px; width: 90%; text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üëã</div>
            <h2 style="margin-bottom: 0.5rem;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <p style="color: #a0aec0; margin-bottom: 1.5rem;">–í–≤–µ–¥–∏—Ç–µ email –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—É—Ä—Å—É</p>
            <input type="email" id="emailInput" placeholder="your@email.com" style="width: 100%; padding: 1rem; border: 2px solid rgba(255,255,255,0.2); border-radius: 12px; background: rgba(255,255,255,0.1); color: #fff; font-size: 1rem; margin-bottom: 1rem;">
            <button id="emailSubmit" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 12px; color: #fff; font-size: 1rem; font-weight: 600; cursor: pointer;">–í–æ–π—Ç–∏</button>
            <p id="emailStatus" style="margin-top: 1rem; font-size: 0.9rem; color: #a0aec0;"></p>
        </div>
    </div>

    <!-- User Badge -->
    <div id="userBadge" style="display: none; position: fixed; top: 1rem; right: 1rem; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 30px; padding: 0.5rem 1rem; font-size: 0.85rem; z-index: 100;">
        <span id="userEmail"></span>
        <button id="logoutBtn" style="background: none; border: none; color: #ef4444; cursor: pointer; margin-left: 0.5rem;">‚úï</button>
    </div>

    <script src="js/config.js"></script>
    <script>
        // Course lessons data
        const lessons = [
            {
                id: 1,
                title: "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Vibecoding",
                icon: "üéØ",
                description: "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å —Ñ–∏–ª–æ—Å–æ—Ñ–∏–µ–π \"–∫–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –≤–∞–π–±\" –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏",
                topics: ["–§–∏–ª–æ—Å–æ—Ñ–∏—è vibecoding", "–ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", "–ü–µ—Ä–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"],
                duration: "2-3 —á–∞—Å–∞",
                link: "lessons/lesson-01.html"
            },
            {
                id: 2,
                title: "–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ Cursor",
                icon: "üñ•Ô∏è",
                description: "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ Cursor - –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ò–ò-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞",
                topics: ["Chat & Composer", "Cmd+K –∫–æ–º–∞–Ω–¥—ã", ".cursorrules"],
                duration: "3-4 —á–∞—Å–∞",
                link: "lessons/lesson-02.html"
            },
            {
                id: 3,
                title: "Claude Code",
                icon: "üß†",
                description: "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–æ—â–Ω—ã–π –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
                topics: ["Artifacts", "–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥", "Agent Mode"],
                duration: "2-3 —á–∞—Å–∞",
                link: "lessons/lesson-03.html"
            },
            {
                id: 4,
                title: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å—Ç–µ–∫",
                icon: "üåê",
                description: "–ò–∑—É—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π",
                topics: ["TypeScript", "Next.js", "PostgreSQL"],
                duration: "3-4 —á–∞—Å–∞",
                link: "04-tech-stack-overview/presentation/index.html"
            },
            {
                id: 5,
                title: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞",
                icon: "‚öôÔ∏è",
                description: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
                topics: ["Next.js setup", "Vercel", "Environment vars"],
                duration: "2-3 —á–∞—Å–∞",
                link: "lessons/lesson-05.html"
            },
            {
                id: 6,
                title: "–ë–µ–∫–µ–Ω–¥",
                icon: "üñ•Ô∏è",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö",
                topics: ["API Routes", "Drizzle ORM", "CRUD"],
                duration: "4-5 —á–∞—Å–æ–≤",
                link: "lessons/lesson-06.html"
            },
            {
                id: 7,
                title: "–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è",
                icon: "üîê",
                description: "–ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Supabase Auth",
                topics: ["Supabase Auth", "Social login", "–ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤"],
                duration: "3-4 —á–∞—Å–∞",
                link: "lessons/lesson-07.html"
            },
            {
                id: 8,
                title: "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö",
                icon: "üóÑÔ∏è",
                description: "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ Supabase –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏",
                topics: ["SQL Editor", "Real-time", "RLS"],
                duration: "3-4 —á–∞—Å–∞",
                link: "lessons/lesson-08.html"
            },
            {
                id: 9,
                title: "–§—Ä–æ–Ω—Ç–µ–Ω–¥",
                icon: "üé®",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ UI —Å –ª–µ–Ω–¥–∏–Ω–≥–æ–º –∏ –∞–¥–º–∏–Ω–∫–æ–π",
                topics: ["Landing Page", "Dashboard", "shadcn/ui"],
                duration: "5-6 —á–∞—Å–æ–≤",
                link: "lessons/lesson-09.html"
            },
            {
                id: 10,
                title: "API –∏ –ø–ª–∞—Ç–µ–∂–∏",
                icon: "üí≥",
                description: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Stripe –∏ –≤–Ω–µ—à–Ω–∏—Ö API",
                topics: ["Stripe", "Webhooks", "–ü–æ–¥–ø–∏—Å–∫–∏"],
                duration: "4-5 —á–∞—Å–æ–≤",
                link: "lessons/lesson-10.html"
            },
            {
                id: 11,
                title: "–§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è",
                icon: "üîó",
                description: "–°–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ production –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                topics: ["OpenAI API", "–î–µ–ø–ª–æ–π", "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"],
                duration: "4-5 —á–∞—Å–æ–≤",
                link: "lessons/lesson-11.html"
            },
            {
                id: 12,
                title: "–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç",
                icon: "üèÜ",
                description: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤",
                topics: ["Code Review", "–¢–µ—Å—Ç—ã", "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è"],
                duration: "6-8 —á–∞—Å–æ–≤",
                link: "lessons/lesson-12.html"
            }
        ];

        // Load progress from localStorage
        let completedLessons = JSON.parse(localStorage.getItem('completedLessons')) || [];
        let currentLesson = parseInt(localStorage.getItem('currentLesson')) || 1;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ config
        function isUnlocked(lessonId) {
            const userEmail = localStorage.getItem('userEmail');

            // –ï—Å–ª–∏ email –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ ‚Äî –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç–æ
            if (userEmail && COURSE_CONFIG.whitelist.includes(userEmail.toLowerCase())) {
                return true;
            }

            // –ò–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥—É–ª–∏
            return COURSE_CONFIG.unlockedModules.includes(lessonId) || completedLessons.includes(lessonId - 1);
        }

        function isCompleted(lessonId) {
            return completedLessons.includes(lessonId);
        }

        // Render lessons
        function renderLessons() {
            const grid = document.getElementById('lessonsGrid');
            grid.innerHTML = '';

            lessons.forEach(lesson => {
                const unlocked = isUnlocked(lesson.id);
                const completed = isCompleted(lesson.id);
                const isCurrent = lesson.id === currentLesson && unlocked && !completed;

                const card = document.createElement('a');
                card.href = unlocked ? lesson.link : '#';
                card.className = `lesson-card ${unlocked ? 'unlocked' : 'locked'} ${completed ? 'completed' : ''} ${isCurrent ? 'current' : ''}`;

                if (!unlocked) {
                    card.onclick = (e) => {
                        e.preventDefault();
                        showLockedMessage(lesson.id);
                    };
                }

                card.innerHTML = `
                    <div class="lesson-header">
                        <div class="lesson-number">${lesson.id}</div>
                        <div class="lock-icon ${unlocked ? 'unlock-icon' : ''}">
                            ${completed ? `
                                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                            ` : unlocked ? `
                                <svg viewBox="0 0 24 24"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"/></svg>
                            ` : `
                                <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                            `}
                        </div>
                    </div>

                    <h3 class="lesson-title">${lesson.icon} ${lesson.title}</h3>
                    <p class="lesson-description">${lesson.description}</p>

                    <div class="lesson-topics">
                        ${lesson.topics.map(topic => `<span class="topic-tag">${topic}</span>`).join('')}
                    </div>

                    <div class="lesson-duration">
                        <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                        ${lesson.duration}
                    </div>

                    ${unlocked ? `
                        <div class="start-btn">
                            ${completed ? '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å' : isCurrent ? '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å' : '–ù–∞—á–∞—Ç—å'}
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
                        </div>
                    ` : ''}

                    ${!unlocked ? `
                        <div class="locked-overlay">
                            <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                            <p>–ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Ä–æ–∫ ${lesson.id - 1}</p>
                        </div>
                    ` : ''}
                `;

                grid.appendChild(card);
            });

            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const completed = completedLessons.length;
            const progress = (completed / 12) * 100;
            document.getElementById('progressBar').style.width = `${Math.max(progress, 8.33)}%`;
            document.getElementById('completedCount').textContent = completed;
        }

        // Show locked message
        function showLockedMessage(lessonId) {
            alert(`üîí –£—Ä–æ–∫ ${lessonId} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!\n\n–ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Ä–æ–∫ ${lessonId - 1}, —á—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å.`);
        }

        // Mark lesson as complete (can be called from lesson pages)
        function completeLesson(lessonId) {
            if (!completedLessons.includes(lessonId)) {
                completedLessons.push(lessonId);
                localStorage.setItem('completedLessons', JSON.stringify(completedLessons));
                if (lessonId >= currentLesson) {
                    currentLesson = lessonId + 1;
                    localStorage.setItem('currentLesson', currentLesson);
                }
                renderLessons();
            }
        }

        // Reset progress (for testing)
        function resetProgress() {
            localStorage.removeItem('completedLessons');
            localStorage.removeItem('currentLesson');
            completedLessons = [];
            currentLesson = 1;
            renderLessons();
        }

        // Demo: Complete lesson 1 for demonstration
        function demoUnlockNext() {
            const nextToComplete = completedLessons.length > 0
                ? Math.max(...completedLessons) + 1
                : 1;
            if (nextToComplete <= 12) {
                completeLesson(nextToComplete);
            }
        }

        // Expose functions globally
        window.completeLesson = completeLesson;
        window.resetProgress = resetProgress;
        window.demoUnlockNext = demoUnlockNext;

        // Email login logic
        const emailModal = document.getElementById('emailModal');
        const emailInputEl = document.getElementById('emailInput');
        const emailSubmit = document.getElementById('emailSubmit');
        const emailStatus = document.getElementById('emailStatus');
        const userBadge = document.getElementById('userBadge');
        const userEmailSpan = document.getElementById('userEmail');
        const logoutBtnEl = document.getElementById('logoutBtn');

        function checkUserEmail() {
            const savedEmail = localStorage.getItem('userEmail');
            if (savedEmail) {
                showUserBadge(savedEmail);
                renderLessons();
            } else {
                emailModal.style.display = 'flex';
            }
        }

        function showUserBadge(email) {
            const isWhitelisted = COURSE_CONFIG.whitelist.includes(email.toLowerCase());
            userEmailSpan.textContent = isWhitelisted ? `üëë ${email}` : `üìß ${email}`;
            userBadge.style.display = 'block';
            if (isWhitelisted) {
                userBadge.style.borderColor = '#f59e0b';
                userBadge.style.background = 'rgba(245, 158, 11, 0.2)';
            }
        }

        emailSubmit.addEventListener('click', () => {
            const email = emailInputEl.value.trim().toLowerCase();
            if (email && email.includes('@')) {
                localStorage.setItem('userEmail', email);
                emailModal.style.display = 'none';
                showUserBadge(email);
                renderLessons();

                if (COURSE_CONFIG.whitelist.includes(email)) {
                    emailStatus.textContent = 'üëë –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø!';
                    emailStatus.style.color = '#f59e0b';
                }
            } else {
                emailStatus.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email';
                emailStatus.style.color = '#ef4444';
            }
        });

        emailInputEl.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') emailSubmit.click();
        });

        logoutBtnEl.addEventListener('click', () => {
            localStorage.removeItem('userEmail');
            location.reload();
        });

        // Initial render
        checkUserEmail();

        // Add keyboard shortcuts for demo
        document.addEventListener('keydown', (e) => {
            if (e.key === 'n' && e.ctrlKey) {
                e.preventDefault();
                demoUnlockNext();
            }
            if (e.key === 'r' && e.ctrlKey && e.shiftKey) {
                e.preventDefault();
                if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?')) {
                    resetProgress();
                }
            }
        });
    </script>
</body>
</html>
