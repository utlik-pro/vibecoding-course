<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–º</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
      min-height: 100vh;
      color: #fff;
      padding: 2rem;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* Login */
    .login-container {
      max-width: 400px;
      margin: 15vh auto;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 3rem;
      text-align: center;
    }

    .login-icon { font-size: 4rem; margin-bottom: 1rem; }
    .login-title { font-size: 1.5rem; margin-bottom: 0.5rem; }
    .login-subtitle { color: #a0aec0; margin-bottom: 2rem; }

    .login-form { display: flex; flex-direction: column; gap: 1rem; }

    .input {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      padding: 0.875rem 1rem;
      font-size: 1rem;
      color: #fff;
      transition: all 0.3s;
    }
    .input::placeholder { color: #6b7280; }
    .input:focus { outline: none; border-color: #667eea; }
    .input.error { border-color: #ef4444; }

    .btn {
      padding: 0.875rem 1.5rem;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(102,126,234,0.4); }
    .btn-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; }
    .btn-success:hover { box-shadow: 0 10px 30px rgba(16,185,129,0.4); }
    .btn-danger { background: #ef4444; color: #fff; }
    .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); }

    .error-msg { color: #ef4444; font-size: 0.9rem; display: none; }
    .error-msg.show { display: block; }

    /* Admin Panel */
    .admin-panel { display: none; }
    .admin-panel.show { display: block; }

    .admin-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .admin-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.75rem;
      font-weight: 700;
    }

    .section {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .section-title {
      font-size: 1.2rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Modules Grid */
    .modules-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 0.75rem;
    }

    .module-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: rgba(255,255,255,0.03);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }
    .module-item:hover { background: rgba(255,255,255,0.08); }
    .module-item.active { border-color: #10b981; background: rgba(16,185,129,0.1); }

    .module-checkbox {
      width: 22px;
      height: 22px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    .module-item.active .module-checkbox {
      background: #10b981;
      border-color: #10b981;
    }
    .module-item.active .module-checkbox::after {
      content: '‚úì';
      color: #fff;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .module-name { font-size: 0.9rem; }
    .module-num { color: #667eea; font-weight: 600; }

    /* Whitelist */
    .whitelist-input-row {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    .whitelist-input-row .input { flex: 1; }

    .email-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .email-tag {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(102,126,234,0.2);
      border: 1px solid rgba(102,126,234,0.3);
      padding: 0.5rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
    }

    .email-remove {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      font-size: 1rem;
      padding: 0;
      line-height: 1;
    }
    .email-remove:hover { color: #ff6b6b; }

    .empty-list {
      color: #6b7280;
      font-style: italic;
      padding: 1rem;
      text-align: center;
    }

    /* Save Section */
    .save-section {
      background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
      border-color: rgba(102,126,234,0.3);
    }

    .save-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .code-output {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1rem;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.85rem;
      overflow-x: auto;
      white-space: pre;
      color: #c9d1d9;
      display: none;
    }
    .code-output.show { display: block; }

    .instructions {
      background: rgba(245,158,11,0.1);
      border: 1px solid rgba(245,158,11,0.3);
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1rem;
      display: none;
    }
    .instructions.show { display: block; }
    .instructions-title { color: #f59e0b; font-weight: 600; margin-bottom: 0.5rem; }
    .instructions ol { margin-left: 1.25rem; color: #a0aec0; }
    .instructions li { margin-bottom: 0.5rem; }
    .instructions code { background: rgba(0,0,0,0.3); padding: 0.2rem 0.4rem; border-radius: 4px; }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #10b981;
      color: #fff;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-weight: 500;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      transition: all 0.3s;
      opacity: 0;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    /* Footer */
    .footer-link {
      display: block;
      text-align: center;
      margin-top: 2rem;
      color: #667eea;
      text-decoration: none;
    }
    .footer-link:hover { color: #a5b4fc; }

    @media (max-width: 600px) {
      body { padding: 1rem; }
      .modules-grid { grid-template-columns: 1fr; }
      .save-actions { flex-direction: column; }
    }
  </style>
</head>
<body>
  <!-- Login -->
  <div class="login-container" id="loginContainer">
    <div class="login-icon">üîê</div>
    <h1 class="login-title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
    <p class="login-subtitle">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
    <form class="login-form" id="loginForm">
      <input type="password" class="input" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" autofocus>
      <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
      <div class="error-msg" id="errorMsg">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
    </form>
  </div>

  <!-- Admin Panel -->
  <div class="container admin-panel" id="adminPanel">
    <div class="admin-header">
      <div class="admin-title">
        <span>üëë</span>
        <span>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</span>
      </div>
      <button class="btn btn-secondary" id="logoutBtn">–í—ã–π—Ç–∏</button>
    </div>

    <!-- Modules Section -->
    <div class="section">
      <div class="section-header">
        <div class="section-title">üìö –û—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥—É–ª–∏</div>
        <div>
          <button class="btn btn-secondary" id="selectAllBtn" style="font-size: 0.8rem; padding: 0.5rem 0.75rem;">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
          <button class="btn btn-secondary" id="deselectAllBtn" style="font-size: 0.8rem; padding: 0.5rem 0.75rem;">–°–Ω—è—Ç—å –≤—Å–µ</button>
        </div>
      </div>
      <div class="modules-grid" id="modulesGrid"></div>
    </div>

    <!-- Whitelist Section -->
    <div class="section">
      <div class="section-title">üìß –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)</div>
      <p style="color: #a0aec0; font-size: 0.9rem; margin: 0.5rem 0 1rem;">–≠—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –í–°–ï –º–æ–¥—É–ª–∏</p>

      <div class="whitelist-input-row">
        <input type="email" class="input" id="emailInput" placeholder="email@example.com">
        <button class="btn btn-success" id="addEmailBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>

      <div class="email-list" id="emailList"></div>
    </div>

    <!-- Save Section -->
    <div class="section save-section">
      <div class="section-title">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</div>
      <p style="color: #a0aec0; font-size: 0.9rem; margin: 0.5rem 0 1rem;">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</p>

      <div class="save-actions">
        <button class="btn btn-primary" id="generateBtn">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        <button class="btn btn-success" id="copyBtn" style="display: none;">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>

      <pre class="code-output" id="codeOutput"></pre>

      <div class="instructions" id="instructions">
        <div class="instructions-title">üìù –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:</div>
        <ol>
          <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—ã—à–µ</li>
          <li>–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª <code>js/config.js</code></li>
          <li>–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥</li>
          <li>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li>
        </ol>
      </div>
    </div>

    <a href="index.html" class="footer-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
  </div>

  <div class="toast" id="toast"></div>

  <script src="js/config.js"></script>
  <script>
    const MODULES = [
      { id: 1, name: '–í–≤–µ–¥–µ–Ω–∏–µ –≤ Vibecoding' },
      { id: 2, name: '–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ Cursor' },
      { id: 3, name: 'Claude Code' },
      { id: 4, name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Å—Ç–µ–∫' },
      { id: 5, name: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞' },
      { id: 6, name: '–ë–µ–∫–µ–Ω–¥' },
      { id: 7, name: '–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è' },
      { id: 8, name: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
      { id: 9, name: '–§—Ä–æ–Ω—Ç–µ–Ω–¥' },
      { id: 10, name: 'API –∏ –ø–ª–∞—Ç–µ–∂–∏' },
      { id: 11, name: '–§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è' },
      { id: 12, name: '–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç' }
    ];

    // State
    let unlockedModules = [...COURSE_CONFIG.unlockedModules];
    let whitelist = [...COURSE_CONFIG.whitelist];

    // Elements
    const loginContainer = document.getElementById('loginContainer');
    const adminPanel = document.getElementById('adminPanel');
    const loginForm = document.getElementById('loginForm');
    const passwordInput = document.getElementById('passwordInput');
    const errorMsg = document.getElementById('errorMsg');
    const modulesGrid = document.getElementById('modulesGrid');
    const emailList = document.getElementById('emailList');
    const emailInput = document.getElementById('emailInput');
    const addEmailBtn = document.getElementById('addEmailBtn');
    const generateBtn = document.getElementById('generateBtn');
    const copyBtn = document.getElementById('copyBtn');
    const codeOutput = document.getElementById('codeOutput');
    const instructions = document.getElementById('instructions');
    const toast = document.getElementById('toast');

    // Auth check
    if (localStorage.getItem('bossAuth') === 'true') {
      showAdmin();
    }

    // Login
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      if (passwordInput.value === COURSE_CONFIG.adminPassword) {
        localStorage.setItem('bossAuth', 'true');
        showAdmin();
      } else {
        passwordInput.classList.add('error');
        errorMsg.classList.add('show');
        passwordInput.value = '';
        setTimeout(() => {
          passwordInput.classList.remove('error');
          errorMsg.classList.remove('show');
        }, 2000);
      }
    });

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('bossAuth');
      location.reload();
    });

    function showAdmin() {
      loginContainer.style.display = 'none';
      adminPanel.classList.add('show');
      renderModules();
      renderEmails();
    }

    // Render modules
    function renderModules() {
      modulesGrid.innerHTML = MODULES.map(m => `
        <div class="module-item ${unlockedModules.includes(m.id) ? 'active' : ''}" data-id="${m.id}">
          <div class="module-checkbox"></div>
          <span class="module-name"><span class="module-num">${m.id}.</span> ${m.name}</span>
        </div>
      `).join('');

      modulesGrid.querySelectorAll('.module-item').forEach(item => {
        item.addEventListener('click', () => {
          const id = parseInt(item.dataset.id);
          if (unlockedModules.includes(id)) {
            unlockedModules = unlockedModules.filter(x => x !== id);
          } else {
            unlockedModules.push(id);
            unlockedModules.sort((a, b) => a - b);
          }
          renderModules();
        });
      });
    }

    // Select/Deselect all
    document.getElementById('selectAllBtn').addEventListener('click', () => {
      unlockedModules = MODULES.map(m => m.id);
      renderModules();
    });

    document.getElementById('deselectAllBtn').addEventListener('click', () => {
      unlockedModules = [];
      renderModules();
    });

    // Render emails
    function renderEmails() {
      if (whitelist.length === 0) {
        emailList.innerHTML = '<div class="empty-list">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</div>';
        return;
      }
      emailList.innerHTML = whitelist.map(email => `
        <div class="email-tag">
          <span>${email}</span>
          <button class="email-remove" data-email="${email}">√ó</button>
        </div>
      `).join('');

      emailList.querySelectorAll('.email-remove').forEach(btn => {
        btn.addEventListener('click', () => {
          whitelist = whitelist.filter(e => e !== btn.dataset.email);
          renderEmails();
        });
      });
    }

    // Add email
    addEmailBtn.addEventListener('click', () => {
      const email = emailInput.value.trim().toLowerCase();
      if (email && email.includes('@') && !whitelist.includes(email)) {
        whitelist.push(email);
        emailInput.value = '';
        renderEmails();
        showToast('Email –¥–æ–±–∞–≤–ª–µ–Ω');
      }
    });

    emailInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        addEmailBtn.click();
      }
    });

    // Generate code
    generateBtn.addEventListener('click', () => {
      const code = `/**
 * –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ö–£–†–°–ê
 * –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É /boss.html
 */

const COURSE_CONFIG = {
  // –ö–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã (–Ω–æ–º–µ—Ä–∞ 1-12)
  unlockedModules: [${unlockedModules.join(', ')}],

  // –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ email (—ç—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –í–°–ï –º–æ–¥—É–ª–∏)
  whitelist: [
    ${whitelist.map(e => `'${e}'`).join(',\n    ')}
  ],

  // –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∫–∏
  adminPassword: '${COURSE_CONFIG.adminPassword}'
};`;

      codeOutput.textContent = code;
      codeOutput.classList.add('show');
      copyBtn.style.display = 'inline-block';
      instructions.classList.add('show');
    });

    // Copy code
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(codeOutput.textContent);
        showToast('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
      } catch (err) {
        showToast('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è');
      }
    });

    // Toast
    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }
  </script>
</body>
</html>
